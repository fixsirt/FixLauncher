<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>FixLauncher</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-new.css">
</head>
<body>

<!-- ‚îÄ‚îÄ‚îÄ SPLASH SCREEN ‚îÄ‚îÄ‚îÄ -->
<div id="splash-screen">
    <div class="splash-inner">
        <img src="logo.png" class="splash-logo" alt="FixLauncher">
        <div class="splash-title">FixLauncher</div>
        <div class="splash-bar-wrap">
            <div class="splash-bar-track">
                <div class="splash-bar-fill" id="splash-bar"></div>
            </div>
            <div class="splash-status" id="splash-status">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
        </div>
    </div>
</div>


<div class="vignette-overlay"></div>

<!-- ===== APP SHELL ===== -->
<div class="app-shell">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <!-- Logo -->
        <div class="sidebar-logo">
            <div class="logo-icon">
                <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="2" width="28" height="28" rx="8" fill="url(#logoGrad)"/>
                    <path d="M10 22V10l6 4 6-4v12l-6-4-6 4z" fill="white" opacity="0.9"/>
                    <defs>
                        <linearGradient id="logoGrad" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                            <stop stop-color="var(--accent-primary)"/>
                            <stop offset="1" stop-color="var(--accent-secondary)"/>
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <div class="logo-text">
                <span class="logo-name">FixLauncher</span>
                <span class="logo-sub">v2.0.4</span>
            </div>
            <!-- Update badge -->
            <button class="update-badge" id="update-badge" title="–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ! –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∞–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∏" style="display:none">
                <svg class="update-badge-icon" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 2.5L10 12M10 2.5L7 5.5M10 2.5L13 5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4.5 10.5C3.12 11.44 2.5 12.7 2.5 14C2.5 16.76 4.74 19 7.5 19H13C15.76 19 18 16.76 18 14C18 12.7 17.38 11.44 16 10.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="update-badge-dot"></span>
                <span class="update-badge-label" id="update-badge-label">–û–±–Ω–æ–≤–∏—Ç—å</span>
            </button>
        </div>

        <!-- Navigation -->
        <nav class="sidebar-nav">
            <button class="nav-item active" data-tab="main">
                <span class="nav-icon">
                    <svg viewBox="0 0 20 20" fill="currentColor"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/></svg>
                </span>
                <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
            </button>
            <button class="nav-item" data-tab="news">
                <span class="nav-icon">
                    <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z" clip-rule="evenodd"/><path d="M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V7z"/></svg>
                </span>
                <span class="nav-label">–ù–æ–≤–æ—Å—Ç–∏</span>
            </button>
            <button class="nav-item" data-tab="mods">
                <span class="nav-icon">
                    <svg viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.976.72-1.854 1.734-2.235C14.816 11.38 16 10.275 16 9a6 6 0 10-12 0c0 1.275 1.184 2.38 2.266 2.765C7.28 12.146 7.985 13.024 8 14h4z"/></svg>
                </span>
                <span class="nav-label">–†–µ—Å—É—Ä—Å—ã</span>
            </button>
            <button class="nav-item" data-tab="servers">
                <span class="nav-icon">
                    <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z" clip-rule="evenodd"/></svg>
                </span>
                <span class="nav-label">–°–µ—Ä–≤–µ—Ä—ã</span>
            </button>
            <button class="nav-item" data-tab="settings">
                <span class="nav-icon">
                    <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/></svg>
                </span>
                <span class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </button>
            <button class="nav-item" data-tab="about">
                <span class="nav-icon">
                    <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                </span>
                <span class="nav-label">–û –ø—Ä–æ–µ–∫—Ç–µ</span>
            </button>
        </nav>

        <!-- Theme switcher in sidebar -->
        <div class="sidebar-themes">
            <span class="sidebar-themes-label">–¢–µ–º–∞</span>
            <div class="theme-dots">
                <div class="theme-circle" data-theme="blue" style="background: linear-gradient(135deg, #3b82f6, #60a5fa);"></div>
                <div class="theme-circle" data-theme="green" style="background: linear-gradient(135deg, #10b981, #34d399);"></div>
                <div class="theme-circle" data-theme="purple" style="background: linear-gradient(135deg, #8b5cf6, #a78bfa);"></div>
                <div class="theme-circle" data-theme="orange" style="background: linear-gradient(135deg, #f59e0b, #fbbf24);"></div>
                <div class="theme-circle" data-theme="pink" style="background: linear-gradient(135deg, #ec4899, #f472b6);"></div>
            </div>
        </div>

        <!-- Window controls at bottom of sidebar -->
        <div class="sidebar-window-controls">
            <button class="window-btn window-btn-minimize" id="btn-minimize" title="–°–≤–µ—Ä–Ω—É—Ç—å">
                <svg viewBox="0 0 16 16" fill="currentColor"><rect x="2" y="7.5" width="12" height="1.5" rx="0.75"/></svg>
            </button>
            <button class="window-btn window-btn-maximize" id="btn-maximize" title="–ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω">
                <span class="window-btn-icon window-btn-icon-maximize" aria-hidden="true"></span>
            </button>
            <button class="window-btn window-btn-close" id="btn-close" title="–ó–∞–∫—Ä—ã—Ç—å">
                <svg viewBox="0 0 16 16" fill="currentColor"><path d="M3.5 3.5l9 9M12.5 3.5l-9 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            </button>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content-area">

        <!-- ‚îÄ‚îÄ MAIN PANEL ‚îÄ‚îÄ -->
        <div class="panel active" id="main-panel">
            <!-- Hero section -->
            <div class="hero-section">
                <div class="hero-badge">Minecraft Launcher</div>
                <h1 class="hero-title">FixLauncher</h1>
                <p class="hero-sub">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ª–∞—É–Ω—á–µ—Ä –¥–ª—è –≤–∞—à–µ–π –∏–≥—Ä—ã</p>
            </div>

            <!-- Player + Version row -->
            <div class="main-fields">
                <div class="field-group">
                    <label class="field-label">
                        <svg viewBox="0 0 16 16" fill="currentColor" width="12" height="12"><path d="M8 8a3 3 0 100-6 3 3 0 000 6zm5 6a5 5 0 00-10 0h10z"/></svg>
                        –ò–º—è –∏–≥—Ä–æ–∫–∞
                    </label>
                    <div class="input-wrapper">
                        <input type="text" id="player-name" class="field-input" value="Player" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è...">
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label">
                        <svg viewBox="0 0 16 16" fill="currentColor" width="12" height="12"><path d="M8 1a7 7 0 100 14A7 7 0 008 1zm0 12.5a5.5 5.5 0 110-11 5.5 5.5 0 010 11zM8 4a.75.75 0 01.75.75v3.5l2.25 1.3a.75.75 0 01-.75 1.3L7.25 9.25A.75.75 0 017 8.5v-3.75A.75.75 0 018 4z"/></svg>
                        –í–µ—Ä—Å–∏—è –∏–≥—Ä—ã
                    </label>
                    <div class="version-selector" id="version-selector">
                        <button type="button" class="version-selector-btn field-input" id="version-selector-btn" aria-expanded="false" aria-haspopup="listbox" aria-controls="version-list">
                            <span class="version-selector-label" id="version-selector-label">üü¢ VanillaSuns ‚Äî –í—ã–∂–∏–≤–∞–Ω–∏–µ</span>
                            <span class="version-selector-arrow" aria-hidden="true">
                                <svg viewBox="0 0 16 16" fill="currentColor" width="14" height="14"><path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"/></svg>
                            </span>
                        </button>
                        <div class="version-selector-dropdown" id="version-selector-dropdown" role="listbox" aria-hidden="true">
                            <div class="version-selector-list" id="version-list"></div>
                        </div>
                    </div>
                    <input type="hidden" name="ver" id="version-hidden-input" value="evacuation">
                </div>
            </div>

            <!-- Play button -->
            <button class="play-btn" id="play-button">
                <span class="play-btn-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                </span>
                <span class="play-btn-text">–ò–ì–†–ê–¢–¨</span>
                <span class="play-btn-shine"></span>
            </button>

            <!-- Quick stats row -->
            <div class="stats-row">
                <div class="stat-card">
                    <span class="stat-icon">üéÆ</span>
                    <div>
                        <div class="stat-val" id="stat-version">1.21.4</div>
                        <div class="stat-key">–í–µ—Ä—Å–∏—è</div>
                    </div>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">‚ö°</span>
                    <div>
                        <div class="stat-val" id="stat-ram">4 GB</div>
                        <div class="stat-key">RAM</div>
                    </div>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">üß©</span>
                    <div>
                        <div class="stat-val" id="stat-mods">‚Äî</div>
                        <div class="stat-key">–ú–æ–¥–æ–≤</div>
                    </div>
                </div>
                <div class="stat-card" id="stat-card-clock">
                    <span class="stat-icon">üï∞Ô∏è</span>
                    <div>
                        <div class="stat-val stat-clock" id="stat-game-time">00:00</div>
                        <div class="stat-key stat-clock-label">–ò–≥—Ä–æ–≤–æ–µ –≤—Ä–µ–º—è</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ NEWS PANEL ‚îÄ‚îÄ -->
        <div class="panel news-panel" id="news-panel" style="display: none;">
            <div class="panel-header">
                <h2 class="panel-title">–ù–æ–≤–æ—Å—Ç–∏</h2>
            </div>
            <div class="news-container" id="news-container">
                <div class="news-loading" id="news-loading">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</div>
                <div class="news-error" id="news-error" style="display: none;"></div>
                <div class="news-list" id="news-list"></div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ SETTINGS PANEL ‚îÄ‚îÄ -->
        <div class="panel settings-panel" id="settings-panel" style="display: none;">
            <div class="panel-header">
                <h2 class="panel-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            </div>

            <div class="settings-grid">
                <div class="settings-card">
                    <div class="settings-card-icon">üìÅ</div>
                    <label>–ü–∞–ø–∫–∞ –∏–≥—Ä—ã</label>
                    <div class="path-input-group">
                        <input type="text" id="minecraft-path" class="field-input" readonly>
                        <button class="browse-btn" id="browse-minecraft">–û–±–∑–æ—Ä</button>
                    </div>
                </div>

                <div class="settings-card">
                    <div class="settings-card-icon">‚òï</div>
                    <label>Java –¥–ª—è Minecraft</label>
                    <div class="path-input-group">
                        <input type="text" id="java-path" class="field-input" readonly>
                        <button class="browse-btn" id="browse-java">–û–±–∑–æ—Ä</button>
                    </div>
                    <small class="info-text">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è</small>
                </div>

                <div class="settings-card settings-card-ram">
                    <div class="settings-card-icon">üíæ</div>
                    <label>RAM –¥–ª—è Minecraft</label>
                    <div class="ram-selector">
                        <input type="range" id="ram-slider" min="1" max="16" value="4" step="1">
                        <div class="ram-display">
                            <span id="ram-value">4</span> GB
                        </div>
                    </div>
                    <small class="info-text">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 4-8 GB</small>
                </div>

                <div class="settings-card">
                    <div class="settings-card-icon">‚öôÔ∏è</div>
                    <label>–§–ª–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞ JVM</label>
                    <button type="button" class="jvm-args-btn" id="jvm-args-btn">
                        <span class="jvm-args-btn-text">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–ª–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞</span>
                        <span class="jvm-args-btn-arrow">‚ñº</span>
                    </button>
                    <small class="info-text">–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –æ–ø—Ü–∏–∏</small>
                </div>
            </div>

            <button class="play-btn" id="save-settings">
                <span class="play-btn-text">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                <span class="play-btn-shine"></span>
            </button>
        </div>

        <!-- ‚îÄ‚îÄ MODS PANEL ‚îÄ‚îÄ -->
        <div class="panel mods-panel" id="mods-panel" style="display: none;">
            <div class="panel-header">
                <h2 class="panel-title">–†–µ—Å—É—Ä—Å—ã</h2>
                <span class="mods-version-value" id="mods-version-value">üü¢ VanillaSuns ‚Äî –í—ã–∂–∏–≤–∞–Ω–∏–µ</span>
            </div>
            <div class="mods-warning mods-warning-noloader" id="mods-warning-noloader" style="display: none;">
                <strong>–ú–æ–¥—ã –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –º–æ–¥–ª–æ–∞–¥–µ—Ä–∞.</strong><br>
                –í—ã–±—Ä–∞–Ω–∞ –≤–µ—Ä—Å–∏—è –±–µ–∑ Fabric / Forge / NeoForge. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ <strong>–ì–ª–∞–≤–Ω—É—é</strong>, –≤—ã–±–µ—Ä–∏—Ç–µ –≤ ¬´–í–µ—Ä—Å–∏—è –∏–≥—Ä—ã¬ª —Å–±–æ—Ä–∫—É <strong>VanillaSuns ‚Äî –í—ã–∂–∏–≤–∞–Ω–∏–µ</strong> –∏–ª–∏ –≤–µ—Ä—Å–∏—é —Å Fabric/Forge/NeoForge ‚Äî —Ç–æ–≥–¥–∞ –º–æ–¥—ã –∑–∞—Ä–∞–±–æ—Ç–∞—é—Ç.
            </div>
            <div class="mods-subtabs">
                <button type="button" class="mods-subtab active" data-modstab="mods">
                    <span class="mods-subtab-icon">üß©</span>
                    <span>–ú–æ–¥—ã</span>
                </button>
                <button type="button" class="mods-subtab" data-modstab="textures">
                    <span class="mods-subtab-icon">üñºÔ∏è</span>
                    <span>–¢–µ–∫—Å—Ç—É—Ä—ã</span>
                </button>
                <button type="button" class="mods-subtab" data-modstab="shaders">
                    <span class="mods-subtab-icon">‚ú®</span>
                    <span>–®–µ–π–¥–µ—Ä—ã</span>
                </button>
            </div>

            <div class="mods-section mods-section-mods" id="mods-section-mods">
                <div class="mods-tabs">
                    <button type="button" class="mods-tab active" data-modstab-view="mods-installed">
                        <span class="mods-tab-icon">üì¶</span>
                        <span>–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ</span>
                    </button>
                    <button type="button" class="mods-tab" data-modstab-view="mods-search">
                        <span class="mods-tab-icon">üîç</span>
                        <span>–ü–æ–∏—Å–∫ –º–æ–¥–æ–≤</span>
                    </button>
                </div>
                <div class="mods-view mods-view-installed" id="mods-view-installed">
                    <div class="mods-search-bar">
                        <div class="input-wrapper mods-search-input-wrap">
                            <input type="text" id="mods-search" class="mods-search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –º–æ–¥–∞–º...">
                        </div>
                    </div>
                    <div class="mods-warning mods-warning-restart" id="mods-warning-restart" style="display: none;">
                        –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.
                    </div>
                    <div class="mods-installed-list" id="mods-installed-list">
                        <div class="mods-loading" id="mods-installed-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –º–æ–¥–æ–≤...</div>
                        <div class="mods-error" id="mods-installed-error" style="display: none;"></div>
                        <div class="mods-installed-list-inner" id="mods-installed-list-inner"></div>
                    </div>
                </div>
                <div class="mods-view mods-view-search" id="mods-view-search" style="display: none;">
                    <div class="mods-search-bar mods-download-bar">
                        <div class="input-wrapper mods-search-input-wrap">
                            <input type="text" id="mods-modrinth-search" class="mods-search-input" placeholder="–ü–æ–∏—Å–∫ –º–æ–¥–æ–≤ –Ω–∞ Modrinth...">
                        </div>
                        <button type="button" class="mods-search-btn" id="mods-modrinth-search-btn">–ù–∞–π—Ç–∏</button>
                    </div>
                    <div class="mods-download-section" id="mods-download-section">
                        <div class="mods-download-placeholder" id="mods-download-placeholder">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏"</div>
                        <div class="mods-loading" id="mods-download-loading" style="display: none;">–ü–æ–∏—Å–∫ –º–æ–¥–æ–≤...</div>
                        <div class="mods-error" id="mods-download-error" style="display: none;"></div>
                        <div class="mods-download-grid" id="mods-download-grid"></div>
                    </div>
                </div>
            </div>

            <div class="mods-section mods-section-textures" id="mods-section-textures" style="display: none;">
                <div class="mods-tabs">
                    <button type="button" class="mods-tab active" data-modstab-view="textures-installed">
                        <span class="mods-tab-icon">üì¶</span><span>–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ</span>
                    </button>
                    <button type="button" class="mods-tab" data-modstab-view="textures-search">
                        <span class="mods-tab-icon">üîç</span><span>–ü–æ–∏—Å–∫ —Ç–µ–∫—Å—Ç—É—Ä</span>
                    </button>
                </div>
                <div class="mods-view mods-view-textures-installed" id="mods-view-textures-installed">
                    <div class="mods-search-bar">
                        <div class="input-wrapper mods-search-input-wrap">
                            <input type="text" id="textures-search" class="mods-search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç—É—Ä–∞–º...">
                        </div>
                    </div>
                    <div class="mods-installed-list" id="textures-installed-list">
                        <div class="mods-loading" id="textures-installed-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ç–µ–∫—Å—Ç—É—Ä...</div>
                        <div class="mods-error" id="textures-installed-error" style="display: none;"></div>
                        <div class="mods-installed-list-inner" id="textures-installed-list-inner"></div>
                    </div>
                </div>
                <div class="mods-view mods-view-textures-search" id="mods-view-textures-search" style="display: none;">
                    <div class="mods-search-bar mods-download-bar">
                        <div class="input-wrapper mods-search-input-wrap">
                            <input type="text" id="textures-modrinth-search" class="mods-search-input" placeholder="–ü–æ–∏—Å–∫ —Ç–µ–∫—Å—Ç—É—Ä –Ω–∞ Modrinth...">
                        </div>
                        <button type="button" class="mods-search-btn" id="textures-modrinth-search-btn">–ù–∞–π—Ç–∏</button>
                    </div>
                    <div class="mods-download-section" id="textures-download-section">
                        <div class="mods-download-placeholder" id="textures-download-placeholder">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç—É—Ä –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏"</div>
                        <div class="mods-loading" id="textures-download-loading" style="display: none;">–ü–æ–∏—Å–∫ —Ç–µ–∫—Å—Ç—É—Ä...</div>
                        <div class="mods-error" id="textures-download-error" style="display: none;"></div>
                        <div class="mods-download-grid" id="textures-download-grid"></div>
                    </div>
                </div>
            </div>

            <div class="mods-section mods-section-shaders" id="mods-section-shaders" style="display: none;">
                <div class="mods-tabs">
                    <button type="button" class="mods-tab active" data-modstab-view="shaders-installed">
                        <span class="mods-tab-icon">üì¶</span><span>–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ</span>
                    </button>
                    <button type="button" class="mods-tab" data-modstab-view="shaders-search">
                        <span class="mods-tab-icon">üîç</span><span>–ü–æ–∏—Å–∫ —à–µ–π–¥–µ—Ä–æ–≤</span>
                    </button>
                </div>
                <div class="mods-view mods-view-shaders-installed" id="mods-view-shaders-installed">
                    <div class="mods-search-bar">
                        <div class="input-wrapper mods-search-input-wrap">
                            <input type="text" id="shaders-search" class="mods-search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —à–µ–π–¥–µ—Ä–∞–º...">
                        </div>
                    </div>
                    <div class="mods-installed-list" id="shaders-installed-list">
                        <div class="mods-loading" id="shaders-installed-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —à–µ–π–¥–µ—Ä–æ–≤...</div>
                        <div class="mods-error" id="shaders-installed-error" style="display: none;"></div>
                        <div class="mods-installed-list-inner" id="shaders-installed-list-inner"></div>
                    </div>
                </div>
                <div class="mods-view mods-view-shaders-search" id="mods-view-shaders-search" style="display: none;">
                    <div class="mods-search-bar mods-download-bar">
                        <div class="input-wrapper mods-search-input-wrap">
                            <input type="text" id="shaders-modrinth-search" class="mods-search-input" placeholder="–ü–æ–∏—Å–∫ —à–µ–π–¥–µ—Ä–æ–≤ –Ω–∞ Modrinth...">
                        </div>
                        <button type="button" class="mods-search-btn" id="shaders-modrinth-search-btn">–ù–∞–π—Ç–∏</button>
                    </div>
                    <div class="mods-download-section" id="shaders-download-section">
                        <div class="mods-download-placeholder" id="shaders-download-placeholder">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à–µ–π–¥–µ—Ä–æ–≤ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏"</div>
                        <div class="mods-loading" id="shaders-download-loading" style="display: none;">–ü–æ–∏—Å–∫ —à–µ–π–¥–µ—Ä–æ–≤...</div>
                        <div class="mods-error" id="shaders-download-error" style="display: none;"></div>
                        <div class="mods-download-grid" id="shaders-download-grid"></div>
                    </div>
                </div>
            </div>

            <div class="mods-detail-overlay" id="mods-detail-overlay" style="display: none;">
                <div class="mods-detail-panel">
                    <div class="mods-detail-header">
                        <h2 class="mods-detail-title" id="mods-detail-title">‚Äî</h2>
                        <button type="button" class="mods-detail-close" id="mods-detail-close">‚úï</button>
                    </div>
                    <div class="mods-detail-body" id="mods-detail-body"></div>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ ABOUT PANEL ‚îÄ‚îÄ -->
        <div class="panel about-panel" id="about-panel" style="display: none;">
            <div class="panel-header">
                <h2 class="panel-title">–û –ø—Ä–æ–µ–∫—Ç–µ</h2>
            </div>

            <div class="about-grid">
                <div class="about-card about-card-main">
                    <div class="about-card-icon">üöÄ</div>
                    <h3>FixLauncher</h3>
                    <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ª–∞—É–Ω—á–µ—Ä –¥–ª—è Minecraft —Å —É–¥–æ–±–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–æ–¥–æ–≤ –∏ —Ç–æ–Ω–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã.</p>
                </div>

                <div class="about-card">
                    <div class="about-card-icon">üë®‚Äçüíª</div>
                    <h3>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏</h3>
                    <div class="devs-list">
                        <a href="https://t.me/rodya61_prod" class="dev-link">fixsirt</a>
                        <a href="https://t.me/rodya61_prod" class="dev-link">rodya61</a>
                    </div>
                </div>
            </div>

            <div class="links-grid">
                <a href="https://t.me/rodya61_prod" class="link-btn">
                    <span class="link-icon">üì±</span>
                    <span>Telegram</span>
                </a>
                <a href="https://discord.gg/yrn8JGDA9N" class="link-btn">
                    <span class="link-icon">üí¨</span>
                    <span>Discord</span>
                </a>
                <a href="https://www.youtube.com/@fixsirtik" class="link-btn">
                    <span class="link-icon">üì∫</span>
                    <span>YouTube</span>
                </a>
                <a href="https://t.me/Fixsirt" class="link-btn">
                    <span class="link-icon">ü§ñ</span>
                    <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                </a>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê SERVERS PANEL ‚ïê‚ïê‚ïê -->
        <div class="panel servers-panel" id="servers-panel" style="display: none;">
            <div class="panel-header">
                <h2 class="panel-title">–°–µ—Ä–≤–µ—Ä—ã</h2>
                <span class="servers-version-badge" id="servers-version-badge">üü¢ VanillaSuns ‚Äî –í—ã–∂–∏–≤–∞–Ω–∏–µ</span>
            </div>

            <!-- –†–µ–∫–ª–∞–º–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã -->
            <div class="servers-section">
                <div class="servers-section-title">
                    <span class="servers-section-icon">‚≠ê</span>
                    –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
                    <span class="servers-section-hint">–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ —Å–µ—Ä–≤–µ—Ä–∞</span>
                </div>
                <div class="servers-ad-list" id="servers-ad-list">
                    <div class="servers-loading" id="servers-ad-loading">
                        <div class="servers-spinner"></div>
                        –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤...
                    </div>
                </div>
            </div>

            <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Ä–≤–µ—Ä—ã –∏–∑ servers.dat -->
            <div class="servers-section">
                <div class="servers-section-title">
                    <span class="servers-section-icon">üéÆ</span>
                    –í–∞—à–∏ —Å–µ—Ä–≤–µ—Ä—ã
                    <button class="servers-refresh-btn" id="servers-refresh-btn" title="–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å">
                        <svg viewBox="0 0 20 20" fill="currentColor" width="14" height="14"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/></svg>
                        –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                </div>
                <div class="servers-user-list" id="servers-user-list">
                    <div class="servers-empty" id="servers-user-empty">–°–µ—Ä–≤–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–æ–≤.</div>
                </div>
            </div>
        </div>

    </main>
</div>

<!-- Hidden tabs for renderer.js compatibility (index-based tab switching) -->
<div style="display:none" aria-hidden="true">
    <button class="tab active" id="compat-tab-main">–ì–ª–∞–≤–Ω–∞—è</button>
    <button class="tab" id="compat-tab-news">–ù–æ–≤–æ—Å—Ç–∏</button>
    <button class="tab" id="compat-tab-servers">–°–µ—Ä–≤–µ—Ä—ã</button>
    <button class="tab" id="compat-tab-settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    <button class="tab" id="compat-tab-mods">–†–µ—Å—É—Ä—Å—ã</button>
    <button class="tab" id="compat-tab-about">–û –ø—Ä–æ–µ–∫—Ç–µ</button>
</div>

<!-- ‚ïê‚ïê‚ïê OVERLAYS ‚ïê‚ïê‚ïê -->
<div class="progress-overlay" id="progress-overlay" style="display: none;">
    <div class="progress-panel">
        <div class="progress-title">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="progress-text" id="progress-text">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞...</div>
    </div>
</div>

<div class="launcher-modal-overlay" id="launcher-modal-overlay" style="display: none;" aria-hidden="true">
    <div class="launcher-modal-panel" role="dialog" aria-modal="true" aria-labelledby="launcher-modal-title">
        <div class="launcher-modal-title" id="launcher-modal-title">–°–æ–æ–±—â–µ–Ω–∏–µ</div>
        <div class="launcher-modal-message" id="launcher-modal-message"></div>
        <div class="launcher-modal-buttons" id="launcher-modal-buttons"></div>
    </div>
</div>

<div class="jvm-modal-overlay" id="jvm-modal-overlay" style="display: none;">
    <div class="jvm-modal-panel" role="dialog" aria-modal="true">
        <div class="jvm-modal-header">
            <h2 class="jvm-modal-title">–§–ª–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞ JVM</h2>
            <button type="button" class="jvm-modal-close" id="jvm-modal-close">‚úï</button>
        </div>
        <div class="jvm-modal-body">
            <div class="jvm-flags-list" id="jvm-flags-list"></div>
            <div class="jvm-custom-args">
                <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                <input type="text" id="jvm-custom-args-input" placeholder="-XX:MaxGCPauseMillis=50">
            </div>
        </div>
        <div class="jvm-modal-footer">
            <button type="button" class="jvm-modal-btn jvm-modal-btn-cancel" id="jvm-modal-cancel">–û—Ç–º–µ–Ω–∞</button>
            <button type="button" class="jvm-modal-btn jvm-modal-btn-save" id="jvm-modal-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>

<script src="renderer.js"></script>
<script>
// ‚îÄ‚îÄ‚îÄ SIDEBAR NAVIGATION ‚îÄ‚îÄ‚îÄ
document.addEventListener('DOMContentLoaded', () => {
    const navItems = document.querySelectorAll('.nav-item');
    const panels = {
        main: document.getElementById('main-panel'),
        news: document.getElementById('news-panel'),
        mods: document.getElementById('mods-panel'),
        servers: document.getElementById('servers-panel'),
        settings: document.getElementById('settings-panel'),
        about: document.getElementById('about-panel')
    };

    // Hide old top-bar tabs if they exist (renderer.js might reference them)
    // We intercept tab switching through nav-items
    navItems.forEach(item => {
        item.addEventListener('click', () => {
            const tab = item.dataset.tab;
            
            // Update nav active
            navItems.forEach(n => n.classList.remove('active'));
            item.classList.add('active');

            // Trigger renderer.js tab switching via hidden compat buttons
            const compatTab = document.getElementById('compat-tab-' + tab);
            if (compatTab) compatTab.click();
        });
    });

    // ‚îÄ‚îÄ‚îÄ PARALLAX (optimized with will-change + RAF throttle) ‚îÄ‚îÄ‚îÄ
    const body = document.body;
    let targetX = 0, targetY = 0;
    let currentX = 0, currentY = 0;
    let rafId = null;
    let lastMouseTime = 0;

    document.addEventListener('mousemove', (e) => {
        const now = performance.now();
        if (now - lastMouseTime < 16) return; // throttle to ~60fps
        lastMouseTime = now;
        
        const cx = window.innerWidth / 2;
        const cy = window.innerHeight / 2;
        targetX = (e.clientX - cx) / cx;
        targetY = (e.clientY - cy) / cy;
        
        if (!rafId) {
            rafId = requestAnimationFrame(tick);
        }
    });

    const LERP = 0.06;
    const MOVE = 12;
    const THRESHOLD = 0.001;

    function tick() {
        rafId = null;
        currentX += (targetX * MOVE - currentX) * LERP;
        currentY += (targetY * MOVE - currentY) * LERP;

        if (Math.abs(currentX - targetX * MOVE) > THRESHOLD || Math.abs(currentY - targetY * MOVE) > THRESHOLD) {
            body.style.backgroundPosition = `calc(50% + ${currentX.toFixed(2)}px) calc(50% + ${currentY.toFixed(2)}px)`;
            rafId = requestAnimationFrame(tick);
        }
    }

    // ‚îÄ‚îÄ‚îÄ STAT: sync RAM display ‚îÄ‚îÄ‚îÄ
    const ramSlider = document.getElementById('ram-slider');
    const statRam = document.getElementById('stat-ram');
    if (ramSlider && statRam) {
        const updateRam = () => { statRam.textContent = ramSlider.value + ' GB'; };
        ramSlider.addEventListener('input', updateRam);
        updateRam();
    }

    // ‚îÄ‚îÄ‚îÄ GAME TIME: delegated to renderer.js playtimeUpdateUI() ‚îÄ‚îÄ‚îÄ
    // –í—Ä–µ–º—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ launcher-playtime.json (—Å–º. renderer.js)
    if (typeof playtimeUpdateUI === 'function') playtimeUpdateUI();
    document.addEventListener('settings-saved', () => { if (typeof playtimeUpdateUI === 'function') playtimeUpdateUI(); });

    // ‚îÄ‚îÄ‚îÄ MODS COUNT: count .jar files directly from disk ‚îÄ‚îÄ‚îÄ
    function updateModsCountStat() {
        const statMods = document.getElementById('stat-mods');
        if (!statMods) return;
        try {
            const versionId = localStorage.getItem('launcher-selected-version') || 'evacuation';
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç—É –∂–µ –ª–æ–≥–∏–∫—É —á—Ç–æ –∏ –≤ renderer.js (_playtimeFilePath)
            const saved = localStorage.getItem('minecraft-path');
            const basePath = saved || (() => {
                try {
                    const _os = require('os'), _path = require('path'), p = _os.platform();
                    if (p === 'win32') return _path.join(process.env.APPDATA || _path.join(_os.homedir(), 'AppData', 'Roaming'), '.vanilla-suns');
                    if (p === 'darwin') return _path.join(_os.homedir(), 'Library', 'Application Support', 'vanilla-suns');
                    return _path.join(_os.homedir(), '.vanilla-suns');
                } catch(e) { return null; }
            })();
            if (!basePath) { statMods.textContent = '‚Äî'; return; }
            let folderName;
            if (versionId === 'evacuation') {
                folderName = 'minecraft-survival';
            } else {
                folderName = 'minecraft-' + String(versionId).replace(/:/g, '-').replace(/[^a-zA-Z0-9.-]/g, '-');
            }
            const modsPath = require('path').join(basePath, folderName, 'mods');
            if (!require('fs').existsSync(modsPath)) { statMods.textContent = '0'; return; }
            const files = require('fs').readdirSync(modsPath);
            const count = files.filter(f => f.endsWith('.jar')).length;
            if (statMods.textContent !== String(count)) {
                statMods.classList.remove('counting');
                void statMods.offsetWidth;
                statMods.textContent = String(count);
                statMods.classList.add('counting');
            }
        } catch(e) {
            statMods.textContent = '‚Äî';
        }
    }
    updateModsCountStat();
    // Also update when mods list DOM changes (after tab open)
    const modsInner = document.getElementById('mods-installed-list-inner');
    if (modsInner && window.MutationObserver) {
        const obs = new MutationObserver(updateModsCountStat);
        obs.observe(modsInner, { childList: true });
    }
    document.addEventListener('settings-saved', updateModsCountStat);
    document.addEventListener('version-changed', updateModsCountStat);
});
</script>
<!-- ===== UPDATE MODAL ===== -->
<div class="update-modal-overlay" id="update-modal-overlay" style="display:none">
    <div class="update-modal">
        <div class="update-modal-icon">
            <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="20" r="18" fill="url(#updGrad)" opacity="0.15"/>
                <path d="M20 8L20 22M20 8L15 13M20 8L25 13" stroke="url(#updGrad)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 22C7.5 23.5 6 26 6 28.5C6 32.09 8.91 35 12.5 35H28C31.59 35 34 32.09 34 28.5C34 26 32.5 23.5 30 22" stroke="url(#updGrad)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                <defs>
                    <linearGradient id="updGrad" x1="0" y1="0" x2="40" y2="40" gradientUnits="userSpaceOnUse">
                        <stop stop-color="#60a5fa"/>
                        <stop offset="1" stop-color="#a78bfa"/>
                    </linearGradient>
                </defs>
            </svg>
        </div>
        <h3 class="update-modal-title">–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!</h3>
        <p class="update-modal-version" id="update-modal-version">–í–µ—Ä—Å–∏—è x.x.x</p>
        <p class="update-modal-desc">FixLauncher –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é.</p>
        <div class="update-progress-wrap" id="update-progress-wrap" style="display:none">
            <div class="update-progress-bar">
                <div class="update-progress-fill" id="update-progress-fill"></div>
            </div>
            <span class="update-progress-text" id="update-progress-text">0%</span>
        </div>
        <div class="update-modal-actions">
            <button class="update-btn-cancel" id="update-btn-cancel">–ü–æ–∑–∂–µ</button>
            <button class="update-btn-install" id="update-btn-install">
                <svg viewBox="0 0 16 16" fill="none" width="14" height="14">
                    <path d="M8 2v8M8 10L5 7M8 10L11 7" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 12h12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                </svg>
                –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–π—á–∞—Å
            </button>
        </div>
    </div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ AUTO UPDATE ‚îÄ‚îÄ‚îÄ
(function() {
    const badge = document.getElementById('update-badge');
    const badgeLabel = document.getElementById('update-badge-label');
    const overlay = document.getElementById('update-modal-overlay');
    const modalVersion = document.getElementById('update-modal-version');
    const progressWrap = document.getElementById('update-progress-wrap');
    const progressFill = document.getElementById('update-progress-fill');
    const progressText = document.getElementById('update-progress-text');
    const btnInstall = document.getElementById('update-btn-install');
    const btnCancel = document.getElementById('update-btn-cancel');

    let updateInfo = null;
    let isDownloading = false;

    function showBadge(info) {
        updateInfo = info;
        badgeLabel.textContent = 'v' + info.version;
        badge.style.display = 'flex';
        // –õ—ë–≥–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
        badge.classList.add('update-badge-enter');
        setTimeout(() => badge.classList.remove('update-badge-enter'), 600);
    }

    function openModal() {
        if (!updateInfo) return;
        modalVersion.textContent = '–í–µ—Ä—Å–∏—è ' + updateInfo.version;
        overlay.style.display = 'flex';
        progressWrap.style.display = 'none';
        progressFill.style.width = '0%';
        progressText.textContent = '0%';
        btnInstall.disabled = false;
        btnInstall.innerHTML = '<svg viewBox="0 0 16 16" fill="none" width="14" height="14"><path d="M8 2v8M8 10L5 7M8 10L11 7" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/><path d="M2 12h12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg> –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–π—á–∞—Å';
    }

    function closeModal() {
        overlay.style.display = 'none';
        isDownloading = false;
    }

    badge.addEventListener('click', openModal);
    btnCancel.addEventListener('click', closeModal);
    overlay.addEventListener('click', (e) => { if (e.target === overlay) closeModal(); });

    btnInstall.addEventListener('click', async () => {
        if (isDownloading) return;
        isDownloading = true;
        progressWrap.style.display = 'flex';
        btnInstall.disabled = true;
        btnInstall.textContent = '–°–∫–∞—á–∏–≤–∞–Ω–∏–µ...';

        window.electronAPI.onUpdateProgress((pct) => {
            progressFill.style.width = pct + '%';
            progressText.textContent = pct + '%';
        });

        const result = await window.electronAPI.downloadUpdate();
        if (result && result.ok) {
            btnInstall.textContent = '–ì–æ—Ç–æ–≤–æ! –ó–∞–∫—Ä—ã–≤–∞–µ–º...';
        } else {
            btnInstall.textContent = '–û—Ç–∫—Ä—ã—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
            setTimeout(closeModal, 2000);
        }
    });

    // –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –æ—Ç main –ø—Ä–æ—Ü–µ—Å—Å–∞
    window.electronAPI.onUpdateStatus((info) => {
        if (info && info.version) showBadge(info);
    });

    // –ù–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—à–ª–æ –¥–æ –Ω–∞–≤–µ—à–∏–≤–∞–Ω–∏—è —Å–ª—É—à–∞—Ç–µ–ª—è ‚Äî –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–∞–º–∏
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            const info = await window.electronAPI.checkForUpdates();
            if (info && info.version) showBadge(info);
        } catch(e) {}
    });
})();
</script>
<div id="toast-container"></div>
</body>
</html>
